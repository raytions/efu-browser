server {
    listen       80;
    server_name  _;

    root /usr/share/nginx/html;
    index index.html;

    # 设置客户端最大请求体大小 (限制上传文件大小)
    client_max_body_size 100M;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # 限制只允许访问 .efu 文件 (在 /app/efu 目录下)
    location /efu/ {
        alias /app/efu/;
        location ~* \.efu$ {
            add_header Content-Type application/octet-stream;
            add_header Content-Disposition 'attachment; filename="$1"';
        }
        # 拒绝访问非 .efu 文件
        location ~ \.((?!efu$)[^.]+)$ {
            deny all;
            return 403;
        }
    }

    # 静态资源缓存
    location ~* \.(?:js|css)$ {
        add_header Cache-Control "public, max-age=31536000";
    }

    location ~* \.(?:png|jpg|jpeg|gif|ico|svg)$ {
        add_header Cache-Control "public, max-age=7776000";
    }

    # 安全头部
    add_header X-Content-Type-Options nosniff;
    add_header X-Frame-Options DENY;
    add_header X-XSS-Protection "1; mode=block";
}
